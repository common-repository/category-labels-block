(()=>{"use strict";const e=window.wp.blocks,t=window.wp.element,l=window.wp.primitives,o=(0,t.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(l.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})),a=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"small-plugins/category-labels","title":"Category Labels","category":"text","description":"Display a subset of relevant post categories/taxonomies.","keywords":["category","labels"],"attributes":{"scopeToCurrentPost":{"type":"boolean","default":true},"displayPrimary":{"type":"boolean","default":false},"fallbackPrimary":{"type":"boolean","default":true},"limitCategories":{"type":"string","default":""}},"providesContext":{"category-labels-block/scope-to-current-post":"scopeToCurrentPost","category-labels-block/display-primary":"displayPrimary","category-labels-block/fallback-primary":"fallbackPrimary","category-labels-block/limit":"limitCategories"},"version":"1.0.0","textdomain":"category-labels-block","editorScript":"category-labels-block-script","editorStyle":"category-labels-block-editor-style","style":"category-labels-block-frontend-style","supports":{"spacing":{"margin":true,"padding":true,"blockGap":true},"align":["full","wide"],"color":{"background":true,"link":true,"text":false},"layout":{"allowSwitching":false,"allowInheriting":false,"allowVerticalAlignment":false,"allowSizingOnChildren":true,"default":{"type":"flex","flexWrap":"nowrap"}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontStyle":true,"__experimentalFontWeight":true,"__experimentalTextTransform":true,"__experimentalFontFamily":true,"__experimentalLetterSpacing":true,"__experimentalTextDecoration":true,"__experimentalSkipSerialization":["textDecoration"],"__experimentalDefaultControls":{"fontSize":true}}}}'),r=window.wp.data;function n(){const{getEntityRecords:e}=(0,r.select)("core");return e("taxonomy","category",{per_page:-1,post:(0,r.select)("core/editor").getEditedPostAttribute("id"),context:"view"})}const s={from:[{type:"block",blocks:["core/post-terms"],isMatch:()=>{const e=n();return Array.isArray(e)&&e?.length>0},transform:t=>{const l=[];return n().forEach((t=>{const o=(0,e.createBlock)("small-plugins/post-term",{term:{id:t?.id,url:t?.link,title:t?.name,kind:"taxonomy",openInNewTab:!1}},[(0,e.createBlock)("small-plugins/term-name")]);l.push(o)})),(0,e.createBlock)("small-plugins/category-labels",{layout:{type:"flex",orientation:"horizontal",justifyContent:t.textAlign}},l)}}]},c=window.wp.i18n,i=window.wp.blockEditor,p=window.lodash,m=window.wp.components,g=function(){return(0,t.createElement)("div",{className:"clb-category-labels-placeholder__preview"},(0,t.createElement)("div",{className:"clb-category-labels-placeholder__actions__indicator"},(0,t.createElement)(m.Icon,{icon:o}),(0,c.__)("Category Labels")))};(0,e.registerBlockType)(a,{icon:o,edit:function(e){const{scopeToCurrentPost:l,displayPrimary:o,limitCategories:a,fallbackPrimary:n}=e.attributes,s=(0,r.useSelect)((t=>t("core/block-editor").getBlock(e.clientId).innerBlocks.length>0)),u=(0,p.get)(e,"__unstableLayoutClassNames",""),b=(0,i.useBlockProps)({className:["category-labels-block-root",u].join(" ")}),y=!e.isSelected&&!s,d=s?i.InnerBlocks.DefaultBlockAppender:i.InnerBlocks.ButtonBlockAppender,k="true"===(0,p.get)(smallPluginsCategoryLabelsBlockData,"hasSeoPlugin",!1),w="true"===(0,p.get)(smallPluginsCategoryLabelsBlockData,"isPremium");return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",b,(0,t.createElement)(i.InnerBlocks,{orientation:"horizontal",allowedBlocks:["small-plugins/post-term"],renderAppender:!y&&d,placeholder:y?(0,t.createElement)(g,null):null})),(0,t.createElement)(i.InspectorControls,null,(0,t.createElement)(m.PanelBody,null,(0,t.createElement)(m.ToggleControl,{checked:l,onChange:()=>e.setAttributes({scopeToCurrentPost:!l}),label:(0,c.__)("Scope to current post","category-labels-block"),help:(0,c.__)("Do you want to only allow category links assigned to the current post?","category-labels-block")}),l&&k&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(m.ToggleControl,{checked:o,label:(0,c.__)("Display Primary","category-labels-block"),help:(0,c.__)("It will display the primary category (if selected) from the yoast, rank math plugin.","category-labels-block"),onChange:t=>e.setAttributes({displayPrimary:t})}),o&&(0,t.createElement)(m.ToggleControl,{checked:n,label:(0,c.__)("Fallback","category-labels-block"),help:(0,c.__)("The primary category will fallback to the parent category (if found), otherwise fallback to the first matching.","category-labels-block"),onChange:t=>e.setAttributes({fallbackPrimary:t})})),l&&w&&(0,t.createElement)(m.__experimentalNumberControl,{allowReset:!0,label:(0,c.__)("Limit Categories","category-labels-block"),min:1,help:(0,c.__)("Show a maximum number of labels whose order matches the block.","category-labels-block"),value:a,onChange:t=>e.setAttributes({limitCategories:t})}))))},save:function(){return(0,t.createElement)("div",i.useBlockProps.save({className:"category-labels-block-root"}),(0,t.createElement)(i.InnerBlocks.Content,null))},transforms:s})})();